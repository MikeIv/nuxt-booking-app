# Правила для Cursor AI

## TypeScript

- **НИКОГДА не использовать тип `any`**. Вместо этого использовать:
  - Конкретные типы (интерфейсы, типы, классы)
  - `unknown` с проверками типов
  - `as unknown as Type` для приведения типов в тестах (когда необходимо)
  - Генерики для обобщенных функций

- Всегда использовать строгую типизацию TypeScript
- При работе с Vue компонентами использовать правильные типы для props, emits, refs
- В тестах создавать интерфейсы для типизации `wrapper.vm` вместо использования `any`

- **НИКОГДА не определять неиспользуемые переменные**:
  - Если переменная не используется, её нужно удалить
  - В блоках `catch` если ошибка не используется, использовать пустой `catch` без параметра: `catch { }` вместо `catch (error) { }`
  - Если переменная нужна только для типизации или отладки, использовать префикс `_` (например, `_error`) или удалить её
  - Всегда проверять код на наличие неиспользуемых переменных перед коммитом

## Nuxt 4

- **ВСЕГДА** следовать стандартам и лучшим практикам Nuxt 4
- Использовать auto-import, composables
- Писать код на TypeScript
- Интегрировать новые страницы, модули и плагины в соответствии с **официальной документацией Nuxt 4**
- При неопределенности в использовании API Nuxt 4 **ОБЯЗАТЕЛЬНО** сверяться с официальной документацией (доступна через настройки в разделе Docs)
- Использовать актуальные методы и подходы из документации Nuxt 4, избегать устаревших практик из Nuxt 3

### Порядок атрибутов в Vue компонентах

- **ВСЕГДА соблюдать правильный порядок атрибутов**:
  - `v-for` должен идти **ПЕРЕД** `v-if`, `v-else`, `v-else-if`
  - Правильный порядок: `v-for` → `v-if` / `v-else` / `v-else-if` → остальные атрибуты
  - Пример правильного порядка:
    ```vue
    <BookingServiceCard
      v-for="service in services"
      v-else
      :key="service.id"
      :id="service.id"
    />
    ```
  - ❌ Неправильно: `v-else` перед `v-for`
  - ✅ Правильно: `v-for` перед `v-else`

### Подключение компонентов

- **Компоненты из подпапок требуют префикс по имени папки**:
  - `components/common/Banner.vue` → используется как `<CommonBanner>`
  - `components/booking/Card.vue` → используется как `<BookingCard>`
  - `components/layout/Header.vue` → используется как `<LayoutHeader>`
  
- **Компоненты из корня `components/` доступны без префикса**:
  - `components/MyComponent.vue` → используется как `<MyComponent>`
  
- **Компоненты из специальных папок имеют префиксы согласно конфигурации**:
  - `components/core/Button.vue` → используется как `<CoreButton>` (префикс из nuxt.config.ts)
  - `components/modules/Auth.vue` → используется как `<ModuleAuth>` (префикс из nuxt.config.ts)
  
- **Правила именования**:
  - Имя компонента = PascalCase от имени файла + префикс папки (если есть)
  - Nuxt 4 автоматически импортирует компоненты, но нужно использовать правильные имена
  - При использовании компонента внутри той же папки также нужен префикс (например, `CommonBanner` внутри `common/`)

## CSS и стилизация

- **НЕ использовать `!important`** в стилях:
  - В проекте используются CSS-модули (`<style module>`), которые обеспечивают изоляцию и специфичность
  - Модульные стили имеют приоритет и защищают от переназначения
  - Для переопределения глобальных стилей использовать составные селекторы или повышать специфичность
  - Исключение: только для переопределения сторонних библиотек, когда нет другого способа

- **Использовать CSS-модули для компонентов**:
  - Предпочитать `<style module lang="scss">` для изоляции стилей
  - Использовать CSS-переменные из `app/assets/styles/variables/`
  - Избегать дублирования глобальных классов и модульных стилей на одном элементе

## Семантическая разметка

- **ВСЕГДА использовать семантические HTML-теги** при оптимизации и создании компонентов:
  - `<header>`, `<nav>`, `<main>`, `<section>`, `<article>`, `<aside>`, `<footer>` для структуры
  - `<form>`, `<fieldset>`, `<legend>` для форм
  - `<address>` для контактной информации
  - `<h1>`-`<h6>` для заголовков (правильная иерархия)
  - `<button>` для кнопок, `<a>` для ссылок
  - Избегать избыточного использования `<div>` там, где есть семантические альтернативы
  - Использовать ARIA-атрибуты при необходимости для улучшения доступности

## Данные отеля

- **ВСЕГДА использовать единый источник данных отеля** из `app/utils/hotel.ts`
- **НИКОГДА не хардкодить** данные отеля (название, адрес, телефон, email) напрямую в компонентах или страницах
- Использовать константу `HOTEL_INFO` из `~/utils/hotel` для получения данных отеля
- При необходимости использовать `useContacts()` composable для получения данных с API, но всегда использовать `HOTEL_INFO` как fallback
- Если нужно добавить новые поля в данные отеля, обновлять интерфейс `HotelInfo` и константу `HOTEL_INFO` в `app/utils/hotel.ts`

**Примеры использования:**
```typescript
// ✅ Правильно - использовать HOTEL_INFO
import { HOTEL_INFO } from "~/utils/hotel";

const phone = computed(() => contacts.value?.phone || HOTEL_INFO.phone);

// ❌ Неправильно - хардкод данных
const phone = "+7 (495) 274-99-99";
```

## Общие правила

- Всегда отвечать на русском языке
- Перед внесением изменений проверять структуру проекта
- Использовать правильные инструменты для работы с кодом (не выводить код пользователю, если не запрошено)

## Работа с документацией

- **ВСЕГДА сверяться с официальной документацией** при работе с Vue, Nuxt 4 и JavaScript/TypeScript:
  - При неопределенности или сомнениях в правильности подхода **ОБЯЗАТЕЛЬНО** обращаться к официальной документации
  - Использовать актуальные методы и API из официальных источников
  - Проверять соответствие кода best practices из документации
  - При работе с Nuxt 4 использовать документацию Nuxt 4 (не версии 3 или другие)
  - При работе с Vue использовать официальную документацию Vue 3 (актуальная версия проекта)
  - Для JavaScript/TypeScript вопросов сверяться с MDN Web Docs или официальной документацией TypeScript
  
- **Источники документации доступны через настройки в разделе Docs**:
  - Nuxt 4: использовать MCP ресурсы для доступа к актуальной документации Nuxt
  - Vue 3: сверяться с официальной документацией Vue.js
  - JavaScript/TypeScript: использовать MDN и официальную документацию TypeScript
  
- **Когда обращаться к документации**:
  - Перед использованием новых API или методов
  - При работе с композаблами Nuxt (проверять доступные опции и параметры)
  - При создании новых страниц, компонентов, модулей (следовать структуре из документации)
  - При работе с серверными функциями и рендерингом (SSR, SSG, CSR)
  - При возникновении ошибок или неожиданного поведения
  - При оптимизации производительности (использовать рекомендованные подходы)

